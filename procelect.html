<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Problèmes textuels</title>

    <script src="https://unpkg.com/mathjs@6.5.0/dist/math.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML.js"></script>
    <script src="https://memoquiz.github.io/algebrite.bundle-for-browser.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>

    <h1>
        Résous le problème suivant
    </h1>
    <div>
        <h2 id="prob"></h2>
        <h2 id="table"></h2>
    </div>
    <h2 id=tableRep></h2>
    <h3 id="expr1"></h3>
    <h2>
        <br>Progression : <output id="reussi"></output> / <output id="total"></output>
        <br>Erreurs : <output id="erreurs"></output>

        <script>

            nouvelleQ = function () {
                rand = Math.floor(Math.random() * qarr.length);
                //rand = 6;
                question = qlib[qarr[rand]];
                table = [];

                var variabtext = question.variables;
                var textrand = Math.floor(Math.random() * question.texte.length);
                var lenq = question.lenq(question.table);

                for (let z = 0; z < question.table.length; z++) {
                    var nrem = question.table[z];
                    var lentab = Number(question.table[z].length)
                    for (let y = 0; y < (lentab - lenq); y++) {
                        nrem.pop();
                    }
                    table[z] = nrem;
                }


                for (i of variabtext) {
                    var regex = RegExp(i[0], i[1]);
                    var remplarr = [];
                    try {
                        var varlen = question[i[0]][textrand].length
                        var varib = question[i[0]][textrand]
                    } catch {
                        var varib = question[i[0]](question.varmax[textrand], question.varmin[textrand])
                        var varlen = varib.length
                    }

                    for (let y = 0; y < varlen; y++) {
                        remplarr[y] = y;
                    }

                    for (let z = 0; z < question.table.length; z++) {
                        for (let w = 0; w < lenq; w++) {
                            if (question.table[z][w].match(regex)) {
                                var rand2 = Math.floor(Math.random() * remplarr.length);
                                var rempl = varib[remplarr[rand2]];
                                remplarr.splice(rand2, 1);
                                table[z][w] = question.table[z][w].replace(regex, rempl);
                            }
                        }
                    }
                }
                question.createTable(question, table, textrand)
                document.getElementById('prob').innerHTML = question.texte[textrand];
                update()
            }

            soum = function (repEleve) {
                var succes = question.testSoum(table, repEleve);
                var button = document.getElementById(repEleve)
                if (succes == true) {
                    if (nbEssais == 0) {
                        reussi++
                        qarr.splice(rand, 1)
                    }
                    nbEssais = 0
                    if (reussi < total) {
                        nouvelleQ()
                        button.style.backgroundColor = "#4CAF50"
                        button.value = "Soumettre"

                    } else {
                        if (reussi / total > 0.8) {
                            document.getElementById('table').innerHTML = '';
                            document.getElementById('prob').innerHTML = 'Bravo!'
                        } else {
                            document.getElementById('prob').innerHTML = 'Tu as besoin de plus de pratique on dirait'
                        }
                        document.getElementById('tableRep').innerHTML = '<input type="button" class="button3" value="Recommancer?" id="Recommencer" style.backgroundColor = "#4CAF50" onclick="setTimeout(function(){recommencer()},100)">'
                        update()
                    }
                } else {
                    nbEssais = 1
                    button.style.backgroundColor = "red"
                    erreurs++
                    update()

                }

            }

            recommencer = function () {
                location.reload();
                return false;
            }

            update = function () {
                document.getElementById('reussi').value = reussi
                document.getElementById('erreurs').value = erreurs
                document.getElementById('total').value = total
            }

            function arraysEqual(a, b) {
                if (a === b) return true;
                if (a == null || b == null) return false;
                if (a.length !== b.length) return false;

                // If you don't care about the order of the elements inside
                // the array, you should sort both arrays here.
                // Please note that calling sort on an array will modify that array.
                // you might want to clone your array first.

                for (var i = 0; i < a.length; ++i) {
                    if (a[i] !== b[i]) return false;
                }
                return true;
            }

            resetquestion = function () {
                for (let i = 0; i < qlib.length; i++) {
                    qarr[i] = i
                }
            }

            function makeTableHTML(myArray) {
                var result = "<table class=\"table1\" align=center>";
                for (var i = 0; i < myArray.length; i++) {
                    result += "<tr class=\"tr1\">";
                    for (var j = 0; j < myArray[i].length; j++) {
                        result += "<td class=\"td1\">" + myArray[i][j] + "</td>";
                    }
                    result += "</tr>";
                }
                result += "</table>";

                return result;
            }

            function max(bob) {
                var par = [];
                var mat = [];
                for (var i = 0; i < bob.length; i++) {
                    mat[i] = Number(bob[i])
                    if (!isNaN(mat[i])) {
                        par.push(mat[i]);
                    }
                }
                return Math.max.apply(Math, par);
            }

            function min(bob) {
                var par = [];
                var mat = [];
                for (var i = 0; i < bob.length; i++) {
                    mat[i] = Number(bob[i])
                    if (!isNaN(mat[i])) {
                        par.push(mat[i]);
                    }
                }
                return Math.min.apply(Math, par);
            }

            function sum(bob) {
                var par = [];
                var mat = [];
                for (var i = 0; i < bob.length; i++) {
                    mat[i] = Number(bob[i])
                    if (!isNaN(mat[i])) {
                        par.push(mat[i]);
                    }
                }
                return math.sum(par);
            }

            function makeTableHTMLRep(myArray) {
                var result = "<table align=center>";
                result += "<tr>";
                for (var i = 0; i < myArray.length; i++) {
                    result += "<td>" + myArray[i] + "</td>";
                }
                result += "</tr>";
                result += "</table>";

                return result;
            }

            function shuffle(array) {
                var m = array.length, t, i;

                // While there remain elements to shuffle…
                while (m) {

                    // Pick a remaining element…
                    i = Math.floor(Math.random() * m--);

                    // And swap it with the current element.
                    t = array[m];
                    array[m] = array[i];
                    array[i] = t;
                }

                return array;
            }

            function transpose(array) {
                var matcleantransp = [];
                for (let i = 0; i < array[0].length; i++) {
                    matcleantransp.push([]);
                    for (let y = 0; y < array.length; y++) {
                        matcleantransp[i][y] = array[y][i]
                    }
                }
                return (matcleantransp);
            }

            var qlib = [
                {
                    type: "pluralité",
                    variables: [["options", 'g'], ["varnum", '']],
                    varnom: [""],
                    varmax: [25, 200, 8],
                    varmin: [],
                    lenq: function (qtable) {
                        return (Math.floor(Math.random() * (qtable[0].length - 3)) + 3);
                    },
                    varnum: function (max) {
                        return (shuffle(Array.from(Array(max).keys())))
                    },
                    createTable: function (quest, tab) {
                        document.getElementById('table').innerHTML = makeTableHTML(tab);
                        quest.repSoum(tab);
                        quest.reponseInput(tab[0]);
                    },
                    reponseInput: function creerbouton(bouttons) {
                        var mat = [];
                        for (let z = 0; z < bouttons.length - 1; z++) {
                            mat[z] = `<input type="button" class="button4" value="${bouttons[z + 1]}" id='${bouttons[z + 1]}'' onclick="setTimeout(function(){soum('${bouttons[z + 1]}')},100)">`
                        }
                        document.getElementById('tableRep').innerHTML = makeTableHTMLRep(mat)
                    },
                    testSoum: function testSoum(tab, repEleve) {
                        return (repEleve == reponse)
                    },
                    repSoum: function repSoum(mat) {
                        reponse = mat[0][mat[1].indexOf(String(max(mat[1])))];
                        console.log(reponse)
                    },
                    texte: [`Un groupe d'élèves votent pour le représentant de classe à l'aide d'un vote à pluralité. Détermine le ou la gagnante.`,
                        `Les élèves de secondaire 5 votent pour la dernière chanson qui sera jouée au bal des finissants à l'aide d'un vote à pluralité. Détermine la chanson gagnante.`,
                        `Un groupe d'amis votent pour leur destination de road trip d'été à l'aide d'un vote à pluralité. Détermine la destination gagnante.`],
                    options: [["Brad", "Flavien", "Bob", "Charles", "Valence", "Petrolia"], ["Let it be", "I Feel like a Woman", "Happy", "Le phoque en Alaska", "La rue principale", "L'hymne à la joie"], ["Colombie-Brittanique", "Rawdon", "Floride", "Utah", "Drummondville", "Californie"]],
                    table: [["", "options", "options", "options", "options", "options", "options"], ["Nombre de votes", "varnum", "varnum", "varnum", "varnum", "varnum", "varnum"]]
                },
                {
                    type: "assentiment",
                    variables: [["options", 'g'], ["varnum", '']],
                    varnom: [""],
                    varmax: [25, 200, 8],
                    varmin: [],
                    lenq: function (qtable) {
                        return (Math.floor(Math.random() * (qtable[0].length - 3)) + 3);
                    },
                    varnum: function (max) {
                        return (shuffle(Array.from(Array(max).keys())))
                    },
                    createTable: function (quest, tab) {
                        document.getElementById('table').innerHTML = makeTableHTML(tab);
                        quest.repSoum(tab);
                        quest.reponseInput(tab[0]);
                    },
                    reponseInput: function creerbouton(bouttons) {
                        var mat = [];
                        for (let z = 0; z < bouttons.length - 1; z++) {
                            mat[z] = `<input type="button" class="button4" value="${bouttons[z + 1]}" id='${bouttons[z + 1]}'' onclick="setTimeout(function(){soum('${bouttons[z + 1]}')},100)">`
                        }
                        document.getElementById('tableRep').innerHTML = makeTableHTMLRep(mat)
                    },
                    testSoum: function testSoum(tab, repEleve) {
                        return (repEleve == reponse)
                    },
                    repSoum: function repSoum(mat) {
                        reponse = mat[0][mat[1].indexOf(String(max(mat[1])))];
                        console.log(reponse)
                    },
                    texte: [`Un groupe d'élèves votent pour le représentant de classe à l'aide d'un vote par assentiement. Détermine le ou la gagnante.`,
                        `Les élèves de secondaire 5 votent pour la dernière chanson qui sera jouée au bal des finissants à l'aide d'un vote par assentiement. Détermine la chanson gagnante.`,
                        `Un groupe d'amis votent pour leur destination de road trip d'été à l'aide d'un vote par assentiement. Détermine la destination gagnante.`],
                    options: [["Brad", "Flavien", "Bob", "Charles", "Valence", "Petrolia"], ["Let it be", "I Feel like a Woman", "Happy", "Le phoque en Alaska", "La rue principale", "L'hymne à la joie"], ["Colombie-Brittanique", "Rawdon", "Floride", "Utah", "Drummondville", "Californie"]],
                    table: [["", "options", "options", "options", "options", "options", "options"], ["Nombre de votes", "varnum", "varnum", "varnum", "varnum", "varnum", "varnum"]]
                },
                {
                    type: "majorité",
                    variables: [["options", 'g'], ["varnum", '']],
                    varnom: [""],
                    varmax: [25, 200, 8],
                    varmin: [],
                    lenq: function (qtable) {
                        return (Math.floor(Math.random() * (qtable[0].length - 3)) + 3);
                    },
                    varnum: function (max) {
                        return (shuffle(Array.from(Array(max).keys())))
                    },
                    createTable: function (quest, tab) {
                        document.getElementById('table').innerHTML = makeTableHTML(tab);
                        quest.repSoum(tab);
                        quest.reponseInput(tab[0]);
                    },
                    reponseInput: function creerbouton(bouttons) {
                        var mat = [];
                        bouttons.shift()
                        bouttons.unshift("Aucun gagnant")
                        console.log(bouttons)
                        for (let z = 0; z < bouttons.length; z++) {
                            mat[z] = `<input type="button" class="button4" value="${bouttons[z]}" id='${bouttons[z]}'' onclick="setTimeout(function(){soum('${bouttons[z]}')},100)">`
                        }
                        document.getElementById('tableRep').innerHTML = makeTableHTMLRep(mat)
                    },
                    testSoum: function testSoum(tab, repEleve) {
                        return (repEleve == reponse)
                    },
                    repSoum: function repSoum(mat) {
                        var valmax = max(mat[1])
                        var tot = sum(mat[1])
                        if (valmax / tot > 0.5) {
                            reponse = mat[0][mat[1].indexOf(String(max(mat[1])))];
                        } else {
                            reponse = "Aucun gagnant";
                        }
                    },
                    texte: [`Un groupe d'élèves votent pour le représentant de classe à l'aide d'un vote à majorité. Détermine le ou la gagnante.`,
                        `Les élèves de secondaire 5 votent pour la dernière chanson qui sera jouée au bal des finissants à l'aide d'un vote à majorité. Détermine la chanson gagnante.`,
                        `Un groupe d'amis votent pour leur destination de road trip d'été à l'aide d'un vote à majorité. Détermine la destination gagnante.`],
                    options: [["Brad", "Flavien", "Bob", "Charles", "Valence", "Petrolia"], ["Let it be", "I Feel like a Woman", "Happy", "Le phoque en Alaska", "La rue principale", "L'hymne à la joie"], ["Colombie-Brittanique", "Rawdon", "Floride", "Utah", "Drummondville", "Californie"]],
                    table: [["", "options", "options", "options", "options", "options", "options"], ["Nombre de votes", "varnum", "varnum", "varnum", "varnum", "varnum", "varnum"]]
                },
                {
                    type: "proportionnel",
                    variables: [["options", 'g'], ["varnum", '']],
                    varnom: [""],
                    varmax: [1000],
                    varmin: [100],
                    vardiv: ["Nombre de sièges"],
                    ndiv: null,
                    lenq: function (qtable) {
                        return (Math.floor(Math.random() * (qtable[0].length - 3)) + 3);
                    },
                    varnum: function (max, min) {
                        var arr = Array.from(Array(max).keys())
                        arr.splice(0, min)
                        return (shuffle(arr))
                    },
                    createTable: function (quest, tab, textrand) {
                        quest.ndiv = Math.floor(Math.random() * 101 + 7);
                        quest.texte[textrand] = quest.texte[textrand].replace("ndiv", quest.ndiv)
                        tab.push(quest.reponseInput(quest, tab[0], textrand));
                        document.getElementById('table').innerHTML = makeTableHTML(tab);
                        document.getElementById('tableRep').innerHTML = `<input type="button" class="button1" value="Soumettre" id="bouttonSoum" onclick="setTimeout(function(){soum('bouttonSoum')},100)">`
                        quest.repSoum(tab, quest);
                    },
                    reponseInput: function creerbouton(quest, tab, textrand) {
                        var mat = [];
                        for (let z = 0; z < tab.length - 1; z++) {
                            mat[z] = `<input type="text" class="inputbar1" id="${tab[z + 1]}" />`
                        }
                        mat.unshift(quest.vardiv[textrand])
                        return mat
                    },
                    testSoum: function testSoum(tab) {
                        var repEleve = [];
                        for (let z = 0; z < tab[0].length - 1; z++) {
                            repEleve[z] = Number(document.getElementById(tab[0][z + 1]).value);
                        }
                        return (arraysEqual(repEleve, reponse))
                    },
                    repSoum: function repSoum(mat, quest) {
                        var reponses = [];
                        var entiers = [];
                        var restes = [];
                        var valtot = sum(mat[1])
                        for (let z = 1; z < mat[1].length; z++) {
                            entiers[z] = Math.floor(mat[1][z] / valtot * quest.ndiv);
                            restes[z] = mat[1][z] / valtot * quest.ndiv - Math.floor(mat[1][z] / valtot * quest.ndiv)
                        }
                        entiers.shift()
                        restes.shift()

                        for (let z = 0; z <= Math.round(sum(restes)); z++) {
                            var maxresteInd = restes.findIndex(function (x) { return x == max(restes) })
                            entiers[maxresteInd] = entiers[maxresteInd] + 1
                            restes[maxresteInd] = restes[maxresteInd] - 1
                        }
                        console.log(entiers)
                        reponse = entiers;
                    },
                    texte: ["Voici les résultat de l'élection à la mairie de Saint-creux-les-profonds. Il y a ndiv postes à pourvoir. Détermine la distributions des sièges."],
                    options: [["Saint-creux solidaire", "Profond et fier", "Parti creumuniste", "Parti Giraffe", "Alliance creuse", "Creuse!"]],
                    table: [["", "options", "options", "options", "options", "options", "options"], ["Nombre de votes", "varnum", "varnum", "varnum", "varnum", "varnum", "varnum"]]
                },
                {
                    type: "condorcet",
                    variables: [["options", 'g'], ["varnum", '']],
                    varnom: [""],
                    varmax: [45],
                    varmin: [5],
                    vardiv: ["Nombre de sièges"],
                    lenq: function () { return (4) },
                    varnum: function (max, min) {
                        var arr = Array.from(Array(max).keys())
                        arr.splice(0, min)
                        return (shuffle(arr))
                    },
                    createTable: function (quest, tab, textrand) {
                        var bob = tab[0].shift()
                        tab[0].sort(function (a, b) { return b - a })
                        tab[0].unshift(bob)
                        document.getElementById('table').innerHTML = makeTableHTML(tab);
                        quest.reponseInput(quest.options[textrand]);
                        quest.repSoum(tab, quest, textrand);

                    },
                    reponseInput: function creerbouton(bouttons) {
                        var mat = [];
                        bouttons.unshift("Aucun gagnant")
                        for (let z = 0; z < bouttons.length; z++) {
                            mat[z] = `<input type="button" class="button4" value="${bouttons[z]}" id='${bouttons[z]}'' onclick="setTimeout(function(){soum('${bouttons[z]}')},100)">`
                        }
                        document.getElementById('tableRep').innerHTML = makeTableHTMLRep(mat)
                    },
                    testSoum: function testSoum(tab, repEleve) {
                        return (repEleve == reponse)
                    },
                    repSoum: function repSoum(mat, quest, textrand) {
                        var matclean = [];
                        var matcleantransp = [];
                        var opt = [];
                        var res = [];
                        var cont = 0;
                        for (i of mat) {
                            i.shift();
                            matclean.push(i);
                        }
                        for (let i = 0; i < matclean[0].length; i++) {
                            matcleantransp.push([]);
                            for (let y = 0; y < matclean.length; y++) {
                                matcleantransp[i][y] = matclean[y][i]
                            }
                        }
                        for (i in quest.options[textrand]) {
                            res[i] = opt[i] = quest.options[textrand][i];
                        }
                        for (let i = 0; i < opt.length; i++) {
                            var elem1 = opt[i];
                            for (let y = i + 1; y < opt.length; y++) {
                                var elem2 = opt[y];
                                var scoreElem1 = 0;
                                var scoreElem2 = 0;
                                for (let w = 0; w < matcleantransp.length; w++) {
                                    if (matcleantransp[w].indexOf(elem1) < matcleantransp[w].indexOf(elem2)) {
                                        scoreElem1 = scoreElem1 + Number(matcleantransp[w][0])
                                    } else {
                                        scoreElem2 = scoreElem2 + Number(matcleantransp[w][0])
                                    }
                                }
                                if (scoreElem1 > scoreElem2) {
                                    res = res.filter(e => e !== elem2);
                                } else {
                                    res = res.filter(e => e !== elem1);
                                }
                                cont++
                            }
                        }
                        if (res.length == 0) {
                            reponse = "Aucun gagnant"
                        } else {
                            reponse = res[0];
                        }
                        console.log(reponse)
                    },
                    texte: ["Les élèves de secondaire 5 doivent choisir une activité récompense. Détermine le choix gagnant à l'aide de la méthode de condorcet."],
                    options: [["Bungee", "Ski alpin", "Paintball"]],
                    table: [["Nombre de votes", "varnum", "varnum", "varnum"], ["Premier choix", "Bungee", "Ski alpin", "Paintball"], ["Deuxième choix", "Paintball", "Bungee", "Ski alpin"], ["Troisième choix", "Ski alpin", "Paintball", "Bungee"]]
                },
                {
                    type: "borda",
                    variables: [["options", 'g'], ["varnum", '']],
                    varnom: [""],
                    varmax: [45],
                    varmin: [5],
                    vardiv: ["Nombre de sièges"],
                    lenq: function () { return (4) },
                    varnum: function (max, min) {
                        var arr = Array.from(Array(max).keys())
                        arr.splice(0, min)
                        return (shuffle(arr))
                    },
                    createTable: function (quest, tab, textrand) {
                        var bob = tab[0].shift()
                        tab[0].sort(function (a, b) { return b - a })
                        tab[0].unshift(bob)
                        document.getElementById('table').innerHTML = makeTableHTML(tab);
                        quest.reponseInput(quest.options[textrand]);
                        quest.repSoum(tab, quest, textrand);

                    },
                    reponseInput: function creerbouton(bouttons) {
                        var mat = [];
                        for (let z = 0; z < bouttons.length; z++) {
                            mat[z] = `<input type="button" class="button4" value="${bouttons[z]}" id='${bouttons[z]}'' onclick="setTimeout(function(){soum('${bouttons[z]}')},100)">`
                        }
                        document.getElementById('tableRep').innerHTML = makeTableHTMLRep(mat)
                    },
                    testSoum: function testSoum(tab, repEleve) {
                        return (repEleve == reponse)
                    },
                    repSoum: function repSoum(mat, quest, textrand) {
                        var matclean = [];
                        var matcleantransp = [];
                        var res = [];
                        var cont = 0;
                        for (i of mat) {
                            i.shift();
                            matclean.push(i);
                        }
                        for (let i = 0; i < matclean[0].length; i++) {
                            matcleantransp.push([]);
                            for (let y = 0; y < matclean.length; y++) {
                                matcleantransp[i][y] = matclean[y][i]
                            }
                        }
                        for (y in quest.options[textrand]) {
                            res.push(0)
                        }

                        console.log(matcleantransp)
                        for (let i = 0; i < matcleantransp.length; i++) {
                            for (y of quest.options[textrand]) {
                                res[quest.options[textrand].indexOf(y)] += ((4 - (matcleantransp[i].indexOf(y))) * Number(matcleantransp[i][0]))
                            }
                        }
                        reponse = quest.options[textrand][res.indexOf(max(res))]
                    },
                    texte: ["La Voix tient un concours spécial. Détermine la personne gagnante à l'aide de la méthode de borda."],
                    options: [["Pénélope Chanteclair", "Yvan Ducash", "Roger Junior"]],
                    table: [["Nombre de votes", "varnum", "varnum", "varnum"], ["Premier choix", "Pénélope Chanteclair", "Yvan Ducash", "Roger Junior"], ["Deuxième choix", "Roger Junior", "Pénélope Chanteclair", "Yvan Ducash"], ["Troisième choix", "Yvan Ducash", "Roger Junior", "Pénélope Chanteclair"]]
                },
                {
                    type: "élimination",
                    variables: [["options", 'g'], ["varnum", '']],
                    varnom: [""],
                    varmax: [45],
                    varmin: [5],
                    vardiv: ["Nombre de sièges"],
                    lenq: function () { return (4) },
                    varnum: function (max, min) {
                        var arr = Array.from(Array(max).keys())
                        arr.splice(0, min)
                        return (shuffle(arr))
                    },
                    createTable: function (quest, tab, textrand) {
                        var bob = tab[0].shift()
                        tab[0].sort(function (a, b) { return b - a })
                        tab[0].unshift(bob)
                        document.getElementById('table').innerHTML = makeTableHTML(tab);
                        quest.reponseInput(quest.options[textrand]);
                        quest.repSoum(tab, quest, textrand);

                    },
                    reponseInput: function creerbouton(bouttons) {
                        var mat = [];
                        for (let z = 0; z < bouttons.length; z++) {
                            mat[z] = `<input type="button" class="button4" value="${bouttons[z]}" id='${bouttons[z]}'' onclick="setTimeout(function(){soum('${bouttons[z]}')},100)">`
                        }
                        document.getElementById('tableRep').innerHTML = makeTableHTMLRep(mat)
                    },
                    testSoum: function testSoum(tab, repEleve) {
                        return (repEleve == reponse)
                    },
                    repSoum: function repSoum(mat, quest, textrand) {
                        var matclean = [];
                        var matcleantransp = [];
                        var res = [];
                        var cont = 0;
                        score = 0;
                        for (i of mat) {
                            i.shift();
                            matclean.push(i);
                        }
                        while (score <= 0.5) {
                            matcleantransp = transpose(matclean)
                            res = []
                            for (y of quest.options[textrand]) {
                                res.push(matclean[0][matclean[1].indexOf(y)])
                            }
                            score = max(res) / sum(res)
                            if (score <= 0.5) {
                                var perd = matclean[1][matclean[0].indexOf(String(min(res)))]
                                for (let z = 0; z < matcleantransp.length; z++) {
                                    var i = matcleantransp[z];
                                    i.splice(i.indexOf(perd), 1);
                                    i.push(NaN);
                                }
                                matclean = transpose(matcleantransp)
                            }
                        }
                        reponse = quest.options[textrand][res.indexOf(String(max(res)))]
                        console.log(reponse)
                    },
                    texte: ["La Voix tient un concours spécial. Détermine la personne gagnante à l'aide de la méthode par elimination."],
                    options: [["Pénélope Chanteclair", "Yvan Ducash", "Roger Junior"]],
                    table: [["Nombre de votes", "varnum", "varnum", "varnum"], ["Premier choix", "Pénélope Chanteclair", "Yvan Ducash", "Roger Junior"], ["Deuxième choix", "Roger Junior", "Pénélope Chanteclair", "Yvan Ducash"], ["Troisième choix", "Yvan Ducash", "Roger Junior", "Pénélope Chanteclair"]]
                }
            ]
            var qarr = [];

            resetquestion()

            var total = 6;
            var erreurs = 0;
            var reussi = 0;
            var nbEssais = 0;
            var qtexte = null;
            var rand;
            var reponse = null;
            var question = null;
            var table = [];

            document.getElementById('reussi').value = reussi
            document.getElementById('erreurs').value = erreurs
            document.getElementById('total').value = total

            button = document.getElementById('bouttonSoum')

            nouvelleQ()

        </script>

</body>

</html>
